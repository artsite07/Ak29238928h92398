<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Adlan Madjied Ridho - Access</title>
  <link rel="icon" href="1.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    :root {
      --bg: #0f172a;
      --cyan: #00f0ff;
      --text: #f8fafc;
      --border: #1e293b;
      --font-main: 'Inter', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: var(--font-main);
    }

    html,
    body {
      height: 100%;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      background: var(--bg);
      color: var(--text);
    }

    /* Container hexagon futuristik */
    .login-hex {
      position: relative;
      width: 320px;
      height: 180px;
      background: rgba(51, 65, 85, 0.75);
      clip-path: polygon(25% 0%, 75% 0%,
          100% 50%, 75% 100%,
          25% 100%, 0% 50%);
      border: 2px solid var(--cyan);
      box-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
      backdrop-filter: blur(10px);
      opacity: 0;
      transform: translateY(50px) scale(0.95);
      transition: transform 0.6s ease, opacity 0.6s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }

    .login-hex.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* Floating effect */
    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-5px);
      }
    }

    .login-hex.floating {
      animation: float 3s ease-in-out infinite;
    }

    /* Form inside hex */
    .form-row {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
    }

    .input-group {
      position: relative;
    }

    input[type="password"] {
      width: 100%;
      padding: 0.8rem 0.8rem 0.8rem 2.5rem;
      border-radius: 0.5rem;
      border: 1px solid var(--border);
      background: rgba(51, 65, 85, 0.5);
      color: var(--cyan);
      font-size: 1rem;
      outline: none;
      transition: border-color .2s;
    }

    input[type="password"]:focus {
      border-color: var(--cyan);
    }

    .input-icon {
      position: absolute;
      left: 0.8rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--cyan);
      font-size: 0.9rem;
      transition: transform 0.2s ease;
    }

    input:focus+.input-icon {
      transform: translateY(-50%) scale(1.2);
    }

    /* Tombol futuristik */
    button {
      width: 100%;
      padding: 0.8rem;
      background: var(--cyan);
      color: var(--bg);
      font-weight: 600;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      box-shadow: 0 0 5px #00f0ff;
    }

    button:hover {
      box-shadow: 0 0 15px #00f0ff, 0 0 30px #00f0ff inset;
      opacity: 0.9;
    }

    button:active {
      transform: translateY(1px);
    }

    button.loading {
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 10px #00f0ff;
      }

      50% {
        box-shadow: 0 0 20px #00f0ff;
      }

      100% {
        box-shadow: 0 0 10px #00f0ff;
      }
    }

    /* Status placeholder */
    .status-placeholder {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>

<body>

  <div class="login-hex" id="loginHex">
    <form id="loginForm" autocomplete="off">
      <div class="form-row">
        <div class="input-group">
          <input id="pw" type="password" placeholder="KATA SANDI" aria-label="Password" required>
          <i class="fas fa-lock input-icon"></i>
        </div>
        <button id="btnLogin" type="submit">ACCESS</button>
      </div>
    </form>
    <div id="status" class="status-placeholder" aria-live="polite">READY</div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Firebase Init
    const firebaseConfig = {
      apiKey: "AIzaSyCba6M_spBXvuG91Zn-XWJ4bSTX6vNcST0",
      authDomain: "index-68220.firebaseapp.com",
      databaseURL: "https://index-68220-default-rtdb.firebaseio.com",
      projectId: "index-68220",
      storageBucket: "index-68220.firebasestorage.app",
      messagingSenderId: "633087068802",
      appId: "1:633087068802:web:f8aa1f2ef9c00b99d1429b",
      measurementId: "G-2VQCRFJQCM"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const decoyPassword = "A4521";
    db.ref('decoy/password').get().then(snap => {
      if (!snap.exists() || snap.val() !== decoyPassword) {
        db.ref('decoy/password').set(decoyPassword).catch(() => console.warn('Gagal set decoy password'));
      }
    }).catch(() => console.warn('Gagal cek decoy password'));

    const form = document.getElementById('loginForm');
    const pwInput = document.getElementById('pw');
    const status = document.getElementById('status');
    const btnLogin = document.getElementById('btnLogin');
    const loginHex = document.getElementById('loginHex');

    async function sha256Hex(str) {
      const enc = new TextEncoder().encode(str);
      const digest = await crypto.subtle.digest('SHA-256', enc);
      return Array.from(new Uint8Array(digest)).map(b => b.toString(16).padStart(2, '0')).join('');
    }

    // Animasi masuk + floating
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => loginHex.classList.add('show', 'floating'), 100);
      pwInput.focus();
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      btnLogin.disabled = true;
      btnLogin.classList.add('loading');
      status.textContent = 'VERIFYING...';
      const val = pwInput.value || '';

      db.ref('decoy/loginAttempts').push({
        ts: Date.now(),
        attempt: val.length + ' chars',
        input: val.substring(0, 3) + '...'
      }).catch(() => {});

      if (val === decoyPassword) {
        db.ref('decoy/fakeSuccesses').push({
          ts: Date.now(),
          note: 'decoy used'
        }).catch(() => {});
        status.textContent = 'ACCESS DENIED. REDIRECTING...';
        window.location.href = 'https://pranx.com/hacker/';
        return;
      }

      try {
        const snap = await db.ref('real/passwordHash').get();
        if (snap.exists()) {
          const storedHash = snap.val();
          const attemptHash = await sha256Hex(val);
          if (attemptHash === storedHash) {
            sessionStorage.setItem('auth', Date.now().toString());
            status.textContent = 'ACCESS GRANTED.';
            window.location.href = 'beranda.html';
          } else {
            status.textContent = 'ACCESS DENIED: INVALID KEY.';
            btnLogin.disabled = false;
            btnLogin.classList.remove('loading');
          }
        } else {
          status.textContent = 'ERROR: HASH NOT FOUND.';
          btnLogin.disabled = false;
          btnLogin.classList.remove('loading');
        }
      } catch (err) {
        console.error(err);
        status.textContent = 'NETWORK ERROR.';
        btnLogin.disabled = false;
        btnLogin.classList.remove('loading');
      }

      pwInput.value = '';
      pwInput.focus();
    });
  </script>

</body>

</html>
